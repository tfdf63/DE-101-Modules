# Решение домашнего задания по модулю 2

1. Установил Posgresql - уже установлена и пользуюсь
2. Загрузил данные в БД с помощью команд SQL
3. Сделал различные запросы к БД, которые сверял с показателями на дашборде в YDL, сделанном в модуле 1 вместо excel

<img src="../DE-101 Module 2/postgresql 1.png" width="400"> <img src="../DE-101 Module 2/postgresql 2.png" width="400">

4. Нарисовал коцептуальную схему БД в сервисе "drawdb.vercel.app/editor"

<img src="../DE-101 Module 2/pgConcmodels.png" width="400">

Здесь изобразил основные таблицы на публичной схеме
Сущности: пользователь, события, прогнозы и итоговая таблица очков по пользователю
Пользователи регистрируются, делают прогнозы на матчи, админ вносит результаты по матчу, рассчитываются очки за угаданные ендпойнты

5. Нарисовал логическую и физическую модель. Добавил несколько таблиц справочников

<img src="../DE-101 Module 2/pgLogFizmodels.png" width="400">

6. С помощью сервиса получил экспорты созданных моделей в postgresql

<img src="../DE-101 Module 2/pg3.png" width="400">

7. Наполнил таблицы тестовыми данными
8. Сделал расчёт очков в таблице points, с изменением в таблице forecsts значения is_processed на true, чтобы при следующем расчёте добавлялись только данные по новым событиям и прогнозам

<img src="../DE-101 Module 2/pg1.png" width="400"><img src="../DE-101 Module 2/pg2.png" width="400">

9. УРА! Подключился к базе данных в облаке
   <img src="../DE-101 Module 2/Con DB 2.png" width="400">
   Использовал yandex cloud, а именно: Yandex Managed Service for PostgreSQL
   Там есть возможность использовать грант на 4000р. для создания первого профиля.
   <img src="../DE-101 Module 2/Monitoring Postgresql.png" width="400">

- Создал кластер
- Получил сертификат SSL (не делал этого ранее, для этого понадобилось поставить wget)
  <img src="../DE-101 Module 2/SSL.png" width="400">
- Настроил подключение в DBeaver и сделал несколько запросов к БД через sql
  <img src="../DE-101 Module 2/Con DB 1.png" width="400">
- При создании кластера указал возможность подключаться к YDL. Создал новое подключение. Созданные ранее таблицы в кластере postgresql подхватились. Создал датасет и можно приступать к созданию Чартов и Дашборда.
  <img src="../DE-101 Module 2/Con DS YDL.png" width="400"><img src="../DE-101 Module 2/Con DS YDL 2.png" width="400">
- - (Момент: в первом модуле я создал дашборд через файл excel и если верно понял, то нельзя соединить данные подключаемые из файла с подключением к БД из кластера. Если кто поправит меня и так всё же можно подключиться в YDL, то дайте знать пожалуйста)

**ИТОГ: впервые подключился к БД в облаке. Узнал о том, как получить SSL сертификат. Двигаемся к следующему модулю 3 про Bi.**
